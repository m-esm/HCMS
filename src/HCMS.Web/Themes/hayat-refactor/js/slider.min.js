var slider={timer:0,sliderSelector:$("#slider"),interval:8e3,outTimeout:500,sliceHeight:$(document).innerHeight(),sliceTimeout:100,sliceOut:!0,oneSlice:!0,next:function(n){var r=$(".slide.active",this.sliderSelector).index(),i,t,e,f,u;for(r===-1&&(r=0),i=$($(".slide",this.sliderSelector)[r]).removeClass("active"),n===undefined&&(n=r+1),n===$(".slide",this.sliderSelector).length&&(n=0),t=$(".slide",this.sliderSelector)[n],t=t?$(t):i,i.addClass("deactive"),t.removeClass("deactive").addClass("active"),$(".slice",t).removeClass("out").removeClass("in"),e=$(document).innerHeight()/slider.sliceHeight,f=[],u=0;u<e;u++)f.push(u);async.eachSeries(f,function(n,r){var u=n;setTimeout(function(){var n=$($(".slice",t)[u]).addClass("in");setTimeout(function(){if(t.index()!==i.index()&&slider.sliceOut)var n=$($(".slice",i)[u]).addClass("out")},slider.outTimeout);r()},(u+1)*slider.sliceTimeout)},function(){setTimeout(function(){i.removeClass("deactive")},slider.interval-10);clearTimeout(slider.timer);slider.timer=setTimeout(slider.next,slider.interval)})},init:function(){$(".slide",this.sliderSelector).each(function(n,t){var u=$(t),f,r;$(".slice",u).remove();f=$("img",t).attr("src");r=$("<div />").addClass("slice").css("backgroundImage","url("+f+")");slider.oneSlice||(r=u.height(slider.sliceHeight).css("backgroundPosition","0 "+i*-1*slider.sliceHeight+"px"));slider.oneSlice&&r.addClass("one");u.append(r)});slider.next()},stop:function(){clearInterval(this.timer)}};$(function(){slider.init();$(window).resize(slider.init)});