(function(n,t,i,r){function s(t,i){this.element=t;this.options=n.extend({},o,i);this._defaults=o;this._name=e;this.init()}function l(){var n=i.createElement("p"),u,e={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"},f;i.body.insertBefore(n,null);for(f in e)n.style[f]!==r&&(n.style[f]="translate3d(1px,1px,1px)",u=t.getComputedStyle(n).getPropertyValue(e[f]));return i.body.removeChild(n),u!==r&&u.length>0&&u!=="none"}function h(n,t){var i=n.indexOf(t);return i!==-1?!0:!1}function c(n){return n===!0}function u(n){return typeof n=="number"}function a(n){return typeof n=="string"}function v(n){return typeof n=="function"}function f(n){return typeof n=="object"}var e="ascensor",o={ascensorFloorName:!1,childType:"div",windowsOn:0,direction:"y",loop:!1,width:"100%",height:"100%",time:250,easing:"linear",keyNavigation:!0,queued:!1,jump:!1,ready:!1,swipeNavigation:"mobile-only",swipeVelocity:.7,wheelNavigation:!1,wheelNavigationDelay:40};Array.prototype.indexOf||(Array.prototype.indexOf=function(n){var i=this.length>>>0,t=Number(arguments[1])||0;for(t=t<0?Math.ceil(t):Math.floor(t),t<0&&(t+=i);t<i;t++)if(t in this&&this[t]===n)return t;return-1});s.prototype={init:function(){var r=this,t,i;if(this.AXIS_X=1,this.AXIS_Y=0,this.dataAttributeMap={next:"ascensor-next",prev:"ascensor-prev",down:"ascensor-down",up:"ascensor-up",left:"ascensor-left",right:"ascensor-right"},this.node=n(this.element),this.nodeChildren=this.node.children(this.options.childType),this.floorActive=u(this._getFloorFromHash())?this._getFloorFromHash():this.options.windowsOn,this.NH=this.node.height(),this.NW=this.node.width(),t=!0,i=navigator.userAgent.match(/Android\s+([\d\.]+)/),i&&(t=parseFloat(i[1])>3),this.directionIsArray=f(this.options.direction),this.supportTransform=l()&&t,f(this.options.ascensorFloorName)&&this.options.ascensorFloorName.length<this.nodeChildren.length)return this._emitConsoleMessage("error","floors total ("+this.nodeChildren.length+") & floor name array length ("+this.options.ascensorFloorName.length+") don't match");if(this.directionIsArray&&this.options.direction.length<this.nodeChildren.length)return this._emitConsoleMessage("error","floors total ("+this.nodeChildren.length+") & direction array lenght ("+this.options.direction.length+") don't match");this.setup()},setup:function(){this._positionElement();this._bindEvents();this.scrollToFloor(this.floorActive);f(this.options.ascensorFloorName)&&this._updateHash(this.floorActive);v(this.options.ready)&&this.options.ready()},_bindEvents:function(){var r=this,e;this.node.on("scrollToDirection",function(n,t){r.scrollToDirection(t)});this.node.on("scrollToStage",function(t,i){if(typeof i=="string"){var u=n.inArray(i,r.options.ascensorFloorName);u!==-1&&r.scrollToFloor(u)}else if(typeof i=="number"){if(i>r.nodeChildren.length)return;r.scrollToFloor(i)}});this.node.on("next",function(){var n=r.nodeChildren.eq(r.floorActive).data(r.dataAttributeMap.next);if(u(n))return r.scrollToFloor(n);r.next()});this.node.on("prev",function(){var n=r.nodeChildren.eq(r.floorActive).data(r.dataAttributeMap.prev);if(u(n))return r.scrollToFloor(n);r.prev()});this.node.on("refresh",function(){r.refresh()});this.node.on("remove",function(){r.destroy()});n(t).on("resize.ascensor",function(){r.scrollToFloor(r.floorActive,!1)});if(f(this.options.ascensorFloorName))n(t).on("hashchange.ascensor",function(n){r._hashchangeHandler(n)});if(t.DeviceOrientationEvent)n(t).on("orientationchange.ascensor",function(){r.scrollToFloor(r.floorActive)});if(this.options.keyNavigation)n(i).on("keydown.ascensor",function(n){r._keypressHandler(n)});if(this.options.wheelNavigation){this.node.on("mousewheel.ascensor DOMMouseScroll.ascensor wheel.ascensor",function(n){setTimeout(function(){r.scrollInChildren||r._handleMouseWheelEvent(n)},10)});this.nodeChildren.on("scroll.ascensor",function(){r.scrollInChildren=!0;r.scrollTimeOut&&clearTimeout(r.scrollTimeOut);r.scrollTimeOut=setTimeout(function(){r.scrollInChildren=!1},300)})}if(this.options.swipeNavigation){e="touchstart.ascensor touchend.ascensor touchcancel.ascensor";this.options.swipeNavigation!=="mobile-only"&&(e+=" mousedown.ascensor mouseup.ascensor");this.node.on(e,function(n){r._handleTouchEvent(n)})}},refresh:function(){this.nodeChildren=this.node.children(this.options.childType);this._positionElement()},destroy:function(){this.nodeChildren.off("scroll.ascensor");this.node.off("mousewheel.ascensor DOMMouseScroll.ascensor wheel.ascensor scrollToDirection scrollToStage next prev refresh remove touchstart.ascensor touchend.ascensor mousedown.ascensor mouseup.ascensor touchcancel.ascensor");n(t).off("resize.ascensor hashchange.ascensor orientationchange.ascensor");n(i).off("keydown.ascensor");this.node.css({position:"",overflow:"",top:"",left:"",width:"",height:""});this.nodeChildren.css({position:"",overflow:"",top:"",left:"",width:"",height:"",transform:""});this.node.removeData()},_handleMouseWheelEvent:function(n){if(!this.node.is(":animated")){if(this.scrollTime=(new Date).getTime(),!this.lastScrollTime||this.scrollTime-this.lastScrollTime>this.options.wheelNavigationDelay){this.lastScrollTime=this.scrollTime;return}this.lastScrollTime=this.scrollTime;var t,i,r;"detail"in n.originalEvent&&(t=n.originalEvent.detail*-1);"wheelDelta"in n.originalEvent&&(t=n.originalEvent.wheelDelta);"wheelDeltaY"in n.originalEvent&&(t=n.originalEvent.wheelDeltaY);"wheelDeltaX"in n.originalEvent&&(i=n.originalEvent.wheelDeltaX*-1);"axis"in n.originalEvent&&n.originalEvent.axis===n.originalEvent.HORIZONTAL_AXIS&&(i=t*-1,t=0);r=t===0?i:t;"deltaY"in n.originalEvent&&(t=n.originalEvent.deltaY*-1,r=t);"deltaX"in n.originalEvent&&(i=n.originalEvent.deltaX,t===0&&(r=i*-1));Math.abs(i)>Math.abs(t)&&i>0&&this.scrollToDirection("left");Math.abs(i)>Math.abs(t)&&i<0&&this.scrollToDirection("right");Math.abs(t)>Math.abs(i)&&t>0&&this.scrollToDirection("up");Math.abs(t)>Math.abs(i)&&t<0&&this.scrollToDirection("down")}},_handleTouchEvent:function(n){var e=this;switch(n.type){case"touchstart":case"mousedown":this.touchStartTime=(new Date).getTime();this.touchStartX=n.type=="touchstart"?n.originalEvent.touches[0].pageX:n.pageX;this.touchStartY=n.type=="touchstart"?n.originalEvent.touches[0].pageY:n.pageY;break;case"touchend":case"touchcancel":case"mouseup":this.touchEndTime=(new Date).getTime();this.touchEndX=n.type=="touchend"||n.type=="touchcancel"?n.originalEvent.changedTouches[0].pageX:n.pageX;this.touchEndY=n.type=="touchend"||n.type=="touchcancel"?n.originalEvent.changedTouches[0].pageY:n.pageY;var t=this.touchStartX-this.touchEndX,i=this.touchStartY-this.touchEndY,r=this.touchEndTime-this.touchStartTime,u=Math.abs(t)/r,f=Math.abs(i)/r;u>this.options.swipeVelocity&&Math.abs(t)>Math.abs(i)&&t<0&&this.scrollToDirection("left");u>this.options.swipeVelocity&&Math.abs(t)>Math.abs(i)&&t>0&&this.scrollToDirection("right");f>this.options.swipeVelocity&&Math.abs(t)<Math.abs(i)&&i<0&&this.scrollToDirection("up");f>this.options.swipeVelocity&&Math.abs(t)<Math.abs(i)&&i>0&&this.scrollToDirection("down")}},_positionElement:function(){var t=this;this.directionIsArray&&this._generateFloorMap();this.node.css({position:"absolute",overflow:"hidden",top:"0",left:"0",width:this.options.width,height:this.options.height});this.nodeChildren.css({position:"absolute",overflow:"auto",top:"0",left:"0",width:"100%",height:"100%"});this.nodeChildren.each(function(i){t.supportTransform?n(this).css({transform:function(){return t.options.direction==="y"?"translateY("+i*100+"%)":t.options.direction==="x"?"translateX("+i*100+"%)":t.directionIsArray?"translateY("+t.options.direction[i][t.AXIS_Y]*100+"%) translateX("+t.options.direction[i][t.AXIS_X]*100+"%)":void 0}}):n(this).css({top:function(){return t.options.direction==="y"?i*100+"%":t.directionIsArray?t.options.direction[i][t.AXIS_Y]*100+"%":void 0},left:function(){return t.options.direction==="x"?i*100+"%":t.directionIsArray?t.options.direction[i][t.AXIS_X]*100+"%":void 0}})})},_getFloorFromHash:function(){return this._getHash()&&this.options.ascensorFloorName&&h(this.options.ascensorFloorName,this._getHash())?this.options.ascensorFloorName.indexOf(this._getHash()):!1},_getHash:function(){return t.location.hash?t.location.hash.split("#").pop():!1},_hashchangeHandler:function(){u(this._getFloorFromHash())&&this._getFloorFromHash()!==this.floorActive&&!this.node.is(":animated")&&this.scrollToFloor(this._getFloorFromHash())},_updateHash:function(n){f(this.options.ascensorFloorName)&&this._getHash()!==this.options.ascensorFloorName[n]&&t.location.replace((""+t.location).split("#")[0]+"#"+this.options.ascensorFloorName[n])},_emitEvent:function(n,t,i){this.node.trigger(n,floor={from:t,to:i})},_emitConsoleMessage:function(n,t){n=="error"&&console.error("Ascensor.js: "+t);n=="warn"&&console.warn("Ascensor.js: "+t)},_keypressHandler:function(t){var i=this,r=t.keyCode||t.which;if(!n("input, textarea, button").is(":focus"))switch(r){case 40:case 83:i.scrollToDirection("down");break;case 38:case 87:i.scrollToDirection("up");break;case 37:case 65:i.scrollToDirection("left");break;case 39:case 68:i.scrollToDirection("right")}},scrollToFloor:function(n){var i,r,t;a(n)&&h(this.options.ascensorFloorName,n)&&(n=this.options.ascensorFloorName.indexOf(n));i=this;r=n===this.floorActive?!1:!0;this.NW!==this.node.width()&&(this.NW=this.node.width());this.NH!==this.node.height()&&(this.NH=this.node.height());t=this._getAnimationSettings(n);r?(this._emitEvent("scrollStart",i.floorActive,n),this.node.stop().animate(t.property,i.options.time,i.options.easing,t.callback)):this.node.stop().scrollTop(t.defaults.scrollTop).scrollLeft(t.defaults.scrollLeft);this.floorActive=n;this.node.data("current-floor",this.floorActive)},prev:function(){var n=this.floorActive-1;if(n<0){if(!this.options.loop)return;n=this.nodeChildren.length-1}this.scrollToFloor(n)},next:function(){var n=this.floorActive+1;if(n>this.nodeChildren.length-1){if(!this.options.loop)return;n=0}this.scrollToFloor(n)},_getAnimationSettings:function(n){var t=this,e=t.floorActive,i={property:{},callback:function(){t._emitEvent("scrollEnd",e,n);t._updateHash(n)},defaults:{}},u={property:{},callback:function(){t._emitEvent("scrollEnd",e,n);t._updateHash(n)}},r,f,o,s;return(i.defaults.scrollTop=n*t.NH,i.defaults.scrollLeft=n*t.NW,t.options.direction==="y")?(i.property.scrollTop=n*t.NH,i):t.options.direction==="x"?(i.property.scrollLeft=n*t.NW,i):t.directionIsArray?(r=t.options.direction[n][t.AXIS_Y]*t.NH,f=t.options.direction[n][t.AXIS_X]*t.NW,i.defaults.scrollTop=r,i.defaults.scrollLeft=f,t.options.queued?(o=this.node.scrollLeft()===f,s=this.node.scrollTop()===r,t.options.queued==="x"&&o?(i.property.scrollTop=r,i):(i.property.scrollLeft=f,u.property.scrollTop=r,i.callback=function(){t.node.stop().animate(u.property,t.options.time,t.options.easing,u.callback)},i)):(i.property.scrollTop=r,i.property.scrollLeft=f,i)):i},scrollToDirection:function(n){var t=this,l=this.nodeChildren.eq(this.floorActive).data(this.dataAttributeMap[n]),i,r,f,e,o,s,h;if(u(l))return t.scrollToFloor(l);if(i=n=="right"||n=="left",r=n=="down"||n=="up",(t.options.direction!="y"||!i)&&(t.options.direction!="x"||!r)){if(t.options.direction=="y"&&n=="down"||t.options.direction=="x"&&n=="right")return t.next();if(t.options.direction=="y"&&n=="up"||t.options.direction=="x"&&n=="left")return t.prev();if(t.directionIsArray){if(f=t.floorMap[t.floorActive],e=f[n],u(e))return t.scrollToFloor(e);if(o=f.closest[n],c(t.options.jump)&&u(o))return t.scrollToFloor(o);if(s=f.furthest[n],u(s)&&(c(t.options.loop)||i&&t.options.loop=="loop-x"||r&&t.options.loop=="loop-y"))return t.scrollToFloor(s);if(h=f.increment[n],u(h)&&(t.options.loop=="increment"||r&&t.options.loop=="increment-y"||i&&t.options.loop=="increment-x"))return t.scrollToFloor(h);if(t.options.loop=="increment-x"&&i||t.options.loop=="increment"){if(t.floorActive==t.floorMap.furthest_x)return t.scrollToFloor(t.floorMap.closest_x);if(t.floorActive==t.floorMap.closest_x)return t.scrollToFloor(t.floorMap.furthest_x)}if(t.options.loop=="increment-y"&&r||t.options.loop=="increment"){if(t.floorActive==t.floorMap.furthest_y)return t.scrollToFloor(t.floorMap.closest_y);if(t.floorActive==t.floorMap.closest_y)return t.scrollToFloor(t.floorMap.furthest_y)}}}},_getDirectFloorIndex:function(t,i,r){var f=this,u=[this.options.direction[i][this.AXIS_Y],this.options.direction[i][this.AXIS_X]],e;return r=="right"&&(u[this.AXIS_X]+=1),r=="left"&&(u[this.AXIS_X]-=1),r=="up"&&(u[this.AXIS_Y]-=1),r=="down"&&(u[this.AXIS_Y]+=1),e=!1,n.each(t,function(n,t){if(t[f.AXIS_Y]==u[f.AXIS_Y]&&t[f.AXIS_X]==u[f.AXIS_X])return e=n,!1}),e},_getAxisFromDirection:function(n){var i=this,t;switch(n){case"up":case"down":t=i.AXIS_Y;break;case"left":case"right":t=i.AXIS_X}return t},_getClosestFloorIndex:function(t,i,r,u){var c=this;u=u||0;var f=this._getAxisFromDirection(r),e=t[i][f],s=f==this.AXIS_Y?this.AXIS_X:this.AXIS_Y,h=!1,o=!1;return n.each(t,function(n,c){c[s]==t[i][s]+u&&((r=="right"||r=="down")&&c[f]>e||(r=="left"||r=="up")&&c[f]<e)&&(!o||Math.abs(c[f]-e)<Math.abs(o[f]))&&(h=n,o=c)}),h},_getFurthestFloorIndex:function(t,i,r,u){var c=this;u=u||0;var f=this._getAxisFromDirection(r),o=t[i][f],s=f==this.AXIS_Y?this.AXIS_X:this.AXIS_Y,e=!1,h=!1;return n.each(t,function(n,r){r[s]==t[i][s]+u&&(!e||Math.abs(r[f]-o)>Math.abs(e[f]-o))&&(e=r,h=n)}),h},_generateFloorMap:function(){function r(n,t){var i=!1;return jQuery.each(n,function(n,r){(i===!1||i[t]<r[t])&&(i=r)}),i}function u(n,t){var i=!1;return jQuery.each(n,function(n,r){(i===!1||i[t]>r[t])&&(i=r)}),i}function f(n,t){return jQuery.grep(i,function(i){return i[t]==n[t]})}var t=this,i;this.floorMap=[];i=jQuery.grep(t.options.direction,function(n,i){return t.nodeChildren.length>i});n.each(i,function(n){t.floorMap[n]={down:t._getDirectFloorIndex(i,n,"down"),up:t._getDirectFloorIndex(i,n,"up"),right:t._getDirectFloorIndex(i,n,"right"),left:t._getDirectFloorIndex(i,n,"left"),increment:{down:t._getFurthestFloorIndex(i,n,"down",1),up:t._getFurthestFloorIndex(i,n,"up",-1),right:t._getFurthestFloorIndex(i,n,"right",1),left:t._getFurthestFloorIndex(i,n,"left",-1)},closest:{down:t._getClosestFloorIndex(i,n,"down"),up:t._getClosestFloorIndex(i,n,"up"),right:t._getClosestFloorIndex(i,n,"right"),left:t._getClosestFloorIndex(i,n,"left")},furthest:{down:t._getFurthestFloorIndex(i,n,"down"),up:t._getFurthestFloorIndex(i,n,"up"),right:t._getFurthestFloorIndex(i,n,"right"),left:t._getFurthestFloorIndex(i,n,"left")}}});var e=r(i,t.AXIS_X),o=f(e,t.AXIS_X),s=r(o,t.AXIS_Y),h=r(i,t.AXIS_Y),c=f(h,t.AXIS_Y),l=r(c,t.AXIS_X);t.floorMap.furthest_x=i.indexOf(l);t.floorMap.furthest_y=i.indexOf(s);var a=u(i,t.AXIS_X),v=f(a,t.AXIS_X),y=u(v,t.AXIS_Y),p=u(i,t.AXIS_Y),w=f(p,t.AXIS_Y),b=u(w,t.AXIS_X);t.floorMap.closest_x=i.indexOf(b);t.floorMap.closest_y=i.indexOf(y)}};n.fn[e]=function(t){return this.each(function(){n.data(this,e)||n.data(this,e,new s(this,t))}),this}})(jQuery,window,document);
//# sourceMappingURL=jquery.ascensor.min.js.map
