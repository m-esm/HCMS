var ARXE=function(){function i(n){var t=$(".level:eq("+n+")");$("[data-src]",t).each(function(n,t){$(t).attr("src",$(t).attr("data-src"))});$("[data-bg]",t).each(function(n,t){$(t).css("background-image","url("+$(t).attr("data-bg")+")")})}function r(n){var r,u,t,s,i,e;if($("#render-farm").remove(),console.log("Render called for floor #"+n),r=$(".level:eq("+n+")"),u=r.data("background"),u!=undefined){$("#render-farm").size()==0&&$(".level-content",r).prepend($("<div />").attr("id","render-farm"));t=$("#render-farm");t.css("backgroundImage","url("+u+")");$(".block",t).css({opacity:1});var h=window.innerHeight,c=window.innerWidth,o=(h+100)*(c+100)/1e4,f=[];if($(".block",t).size()<o)for(s=o-$(".block",t).size(),i=0;i<=s;i++)t.append($("<div />").addClass("block")),f.push({index:i,duration:parseInt(Math.random().toString().substr(2,3))});e=0;$(f).each(function(n,i){setTimeout(function(){var n=$(".block:eq("+i.index+")",t).css({opacity:0});e++;e+1>f.length&&setTimeout(function(){$(".block",t).remove()},500)},i.duration)})}}function u(){ascensor=$("#ascensor").ascensor({ascensorFloorName:n,loop:!1,direction:t,time:500});var u=ascensor.data("ascensor");ascensor.on("scrollStart",function(t,i){console.log(n[i.to].indexOf("gap_"));n[i.to].indexOf("gap_")==0&&setTimeout(function(){u.scrollToFloor("Graphic")},100)});ascensor.on("scrollEnd",function(n,t){r(t.to);i(t.to)});u=ascensor.data("ascensor");$(window).keyup(function(n){var t=$(".level:eq("+u.floorActive+")");t.children(".slider").size()==1&&(n.keyCode==39&&$(".btn-next",t).click(),n.keyCode==37&&$(".btn-prev",t).click(),n.keyCode==27&&$(".btn-gallery",t).click());$(".gallery",t).size()==1&&n.keyCode==71&&$(".gallery",t).click()});r(u.floorActive);i(u.floorActive);$("#arrow .up").click(function(){u.scrollToDirection("up")});$("#arrow .down").click(function(){u.scrollToDirection("down")});$("#arrow .left").click(function(){u.scrollToDirection("left")});$("#arrow .right").click(function(){u.scrollToDirection("right")})}$(".graphicCatWorks").each(function(n,t){var i=$(t),r=function(n){i.find(".box-pic").css("backgroundImage","url("+n.data("src")+")");i.find(".box-title").text(n.data("title"));i.find(".box-text").text(n.data("text"))};r(i.find(".icon").first());i.find(".icon").click(function(){var n=$(this);r(n)})});$("[title]").miniTip({delay:0,fadeIn:100,fadeOut:0});$(document).on("click",".project .slider .btn-prev",function(){function i(n){return $("img:eq("+n+")",t)}var r=$(this).parents(".project").first(),t=$(".slider",r),n=0;t.data("current-image")==undefined?t.data("current-image",n):n=parseInt(t.data("current-image"));i(n).hide();n-1<0&&(n=$("img",t).size());i(n-1).fadeIn();t.data("current-image",n-1)});$(document).on("click",".project .slider .btn-next",function(){function i(n){return $("img:eq("+n+")",t)}var r=$(this).parents(".project").first(),t=$(".slider",r),n=0;t.data("current-image")==undefined?t.data("current-image",n):n=parseInt(t.data("current-image"));i(n).hide();n+1>=$("img",t).size()&&(n=-1);i(n+1).fadeIn();t.data("current-image",n+1)});$(document).on("click",".project .slider .btn-gallery",function(){var n=$(this).parents(".project").first(),t;$(".slider",n).remove();$(".members",n).fadeIn();$("#arrow").fadeIn();t=$(".level:eq("+ascensorInstance.floorActive+")").data("ascensor-left",ascensorInstance.floorActive-1).data("ascensor-right",ascensorInstance.floorActive+1)});$(document).on("click",".box.gallery",function(){var n=$(this).parents(".project").first(),t=n.data("name");$.get("/project_gallery_ajax",{pname:t}).done(function(t){var i=JSON.parse(t),r;$(".members",n).fadeOut();$("#arrow").fadeOut();n.prepend($("<div />").addClass("slider"));r=$(".level:eq("+ascensorInstance.floorActive+")").data("ascensor-left",ascensorInstance.floorActive).data("ascensor-right",ascensorInstance.floorActive);$(".slider",n).prepend($("<a />").addClass("btn-gallery").append("<i class='glyphicon glyphicon-picture'><\/i>"));$(".slider",n).prepend($("<a />").addClass("btn-next").append("<i class='glyphicon glyphicon-menu-right'><\/i>"));$(".slider",n).prepend($("<a />").addClass("btn-prev").append("<i class='glyphicon glyphicon-menu-left'><\/i>"));$(i).each(function(t,i){$(".slider",n).append($("<img />").attr("src",i).hide())});$(".slider img",n).first().fadeIn()})});$(window).resize(function(){var n=window.innerWidth;$(".grid-center").each(function(t,i){var u=$(i).width(),r=n/2-u/2;r=Math.floor(r/100)*100;$(i).css("left",r)})});var n=["first","Home","Manifest","Contact","Architecture","Architecture_Manifest","Architecture_Staff","Architecture_Projects"],t=[[2,0],[2,1],[1,1],[0,1],[2,2],[1,2],[2,3],[3,2]];$.get("/projects_ajax").done(function(i){var r=JSON.parse(i);$(r).each(function(i,r){n.push(r);t.push([3,3+i])});$.get("/staff_ajax").done(function(i){var f=JSON.parse(i),r;for($(f).each(function(i,r){n.push(r);t.push([2,4+i])}),r=0;r<100;r++)n.push("gap_"+r),t.push([r+3,1]);n.push("Graphic");t.push([103,1]);n.push("Graphic_Home");t.push([104,1]);$.get("/graphic_ajax").done(function(i){for(var f,r=0;r<i.cats.length;r++)for(console.log("Graphic_Categories_"+r,104,2+r),n.push("Graphic_Categories_"+r),t.push([104,2+r]),f=0;f<1;f++)console.log("Graphic_Categories_"+r+"_work_"+f),n.push("Graphic_Categories_"+r+"_work_"+f),console.log([104+(1+f),2+r]),t.push([104-(1+f),2+r]);for(n.push("Graphic_Projects"),t.push([105,1]),r=0;r<i.projects.length;r++)for(n.push("Graphic_Project_"+i.projects[r].name),t.push([106+r,1]),f=0;f<i.projects[r].count;f++)n.push("Graphic_Project_"+r+"_work_"+f),t.push([106+r,2+f]);u()}).error(function(n){console.log(n)})})});$(".content-scroll").mCustomScrollbar({theme:"minimal-dark",axis:"y"});setTimeout(function(){$("#arrow-help").fadeOut()},3e3);$(window).resize();$(".filter","#projects-filter").click(function(n){if(!$(n.target).hasClass("remove-filter")&&!$(n.target).is("select")&&!$(n.target).is("input")){var t=$(".filter","#projects-filter").css("background","none");$(this).hasClass("active")?($(this).removeClass("active").fadeIn().animate({width:100}).children(".input").fadeOut().animate({opacity:0}),t.fadeIn()):(t.fadeOut(),$(this).css("background","#fff").addClass("active").fadeIn().animate({width:600}).children(".input").fadeIn().animate({opacity:1}))}});$(document).on("click",".filter .remove-filter",function(){var n=$(this).parents(".filter").removeClass("changed").children("input,select").val("");$("#projects-filter")[0].reset();$(".projects a.project").removeClass("grayscale");$(this).remove()});$("input,select","#projects-filter").change(function(){$(this).val()==undefined||$(this).val()==""?$(this).parents(".filter").removeClass("changed").click():($(this).parents(".filter").addClass("changed").click(),$(this).parents(".filter").children("label").append("<div class='remove-filter'>X<\/div>"));var n=$("#projects-filter");$.get("/projects_filter",n.serializeArray()).done(function(n){var t=JSON.parse(n);$(".projects a.project").addClass("grayscale");$(t).each(function(n,t){$(".projects a.project[data-rid="+t+"]").removeClass("grayscale")})})});$(".box.clear-form").click(function(){$(this).fadeOut();$("#projects-filter")[0].reset();$(".projects a.project").removeClass("grayscale")})},ascensor=null,ascensorInstance=null;$(document).ready(function(){setTimeout(function(){$("#loader").fadeOut()},1e3);ARXE()});