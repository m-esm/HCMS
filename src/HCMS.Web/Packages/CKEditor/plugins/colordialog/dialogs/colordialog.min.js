CKEDITOR.dialog.add("colordialog",function(n){function h(){t.getById(v).removeStyle("background-color");a.getContentElement("picker","selectedColor").setValue("");f&&f.removeAttribute("aria-selected");f=null}function y(n){n=n.data.getTarget();var t;"td"==n.getName()&&(t=n.getChild(0).getHtml())&&(f=n,f.setAttribute("aria-selected",!0),a.getContentElement("picker","selectedColor").setValue(t))}function k(n){n=n.replace(/^#/,"");for(var t=0,i=[];2>=t;t++)i[t]=parseInt(n.substr(2*t,2),16);return"#"+(165<=.2126*i[0]+.7152*i[1]+.0722*i[2]?"000":"fff")}function p(n){n.name||(n=new CKEDITOR.event(n));var f=!/mouse/.test(n.name),i=n.data.getTarget(),u;"td"==i.getName()&&(u=i.getChild(0).getHtml())&&(c(n),f?r=i:b=i,f&&(i.setStyle("border-color",k(u)),i.setStyle("border-style","dotted")),t.getById(o).setStyle("background-color",u),t.getById(s).setHtml(u))}function c(n){if(n=!/mouse/.test(n.name)&&r){var i=n.getChild(0).getHtml();n.setStyle("border-color",i);n.setStyle("border-style","solid")}r||b||(t.getById(o).removeStyle("background-color"),t.getById(s).setHtml("&nbsp;"))}function d(t){var i=t.data,r=i.getTarget(),f=i.getKeystroke(),u="rtl"==n.lang.dir;switch(f){case 38:(t=r.getParent().getPrevious())&&(t=t.getChild([r.getIndex()]),t.focus());i.preventDefault();break;case 40:(t=r.getParent().getNext())&&(t=t.getChild([r.getIndex()]))&&1==t.type&&t.focus();i.preventDefault();break;case 32:case 13:y(t);i.preventDefault();break;case u?37:39:(t=r.getNext())?1==t.type&&(t.focus(),i.preventDefault(!0)):(t=r.getParent().getNext())&&(t=t.getChild([0]))&&1==t.type&&(t.focus(),i.preventDefault(!0));break;case u?39:37:(t=r.getPrevious())?(t.focus(),i.preventDefault(!0)):(t=r.getParent().getPrevious())&&(t=t.getLast(),t.focus(),i.preventDefault(!0))}}var l=CKEDITOR.dom.element,t=CKEDITOR.document,i=n.lang.colordialog,a,w={type:"html",html:"&nbsp;"},f,r,b,e=function(n){return CKEDITOR.tools.getNextId()+"_"+n},o=e("hicolor"),s=e("hicolortext"),v=e("selhicolor"),u;return function(){function r(n,t){for(var s,r,e,i=n;i<n+3;i++)for(s=new l(u.$.insertRow(-1)),s.setAttribute("role","row"),r=t;r<t+3;r++)for(e=0;6>e;e++)f(s.$,"#"+o[r]+o[e]+o[i])}function f(n,t){var i=new l(n.insertCell(-1)),r;i.setAttribute("class","ColorCell");i.setAttribute("tabIndex",-1);i.setAttribute("role","gridcell");i.on("keydown",d);i.on("click",y);i.on("focus",p);i.on("blur",c);i.setStyle("background-color",t);i.setStyle("border","1px solid "+t);i.setStyle("width","14px");i.setStyle("height","14px");r=e("color_table_cell");i.setAttribute("aria-labelledby",r);i.append(CKEDITOR.dom.element.createFromHtml('<span id="'+r+'" class="cke_voice_label">'+t+"<\/span>",CKEDITOR.document))}var o,t,s,n;u=CKEDITOR.dom.element.createFromHtml('<table tabIndex="-1" aria-label="'+i.options+'" role="grid" style="border-collapse:separate;" cellspacing="0"><caption class="cke_voice_label">'+i.options+'<\/caption><tbody role="presentation"><\/tbody><\/table>');u.on("mouseover",p);u.on("mouseout",c);for(o="00 33 66 99 cc ff".split(" "),r(0,0),r(3,0),r(0,3),r(3,3),t=new l(u.$.insertRow(-1)),t.setAttribute("role","row"),f(t.$,"#000000"),s=0;16>s;s++)n=s.toString(16),f(t.$,"#"+n+n+n+n+n+n);f(t.$,"#ffffff")}(),{title:i.title,minWidth:360,minHeight:220,onLoad:function(){a=this},onHide:function(){h();var n=r.getChild(0).getHtml();r.setStyle("border-color",n);r.setStyle("border-style","solid");t.getById(o).removeStyle("background-color");t.getById(s).setHtml("&nbsp;");r=null},contents:[{id:"picker",label:i.title,accessKey:"I",elements:[{type:"hbox",padding:0,widths:["70%","10%","30%"],children:[{type:"html",html:"<div><\/div>",onLoad:function(){CKEDITOR.document.getById(this.domId).append(u)},focus:function(){(r||this.getElement().getElementsByTag("td").getItem(0)).focus()}},w,{type:"vbox",padding:0,widths:["70%","5%","25%"],children:[{type:"html",html:"<span>"+i.highlight+'<\/span><div id="'+o+'" style="border: 1px solid; height: 74px; width: 74px;"><\/div><div id="'+s+'">&nbsp;<\/div><span>'+i.selected+'<\/span><div id="'+v+'" style="border: 1px solid; height: 20px; width: 74px;"><\/div>'},{type:"text",label:i.selected,labelStyle:"display:none",id:"selectedColor",style:"width: 76px;margin-top:4px",onChange:function(){try{t.getById(v).setStyle("background-color",this.getValue())}catch(n){h()}}},w,{type:"button",id:"clear",label:i.clear,onClick:h}]}]}]}]}});
//# sourceMappingURL=colordialog.min.js.map
