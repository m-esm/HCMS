(function(n){"use strict";n.browser||(n.browser={},n.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),n.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),n.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),n.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()));var t={destroy:function(){return n(this).unbind(".maskMoney"),n.browser.msie&&(this.onpaste=null),this},mask:function(t){return this.each(function(){var i=n(this);return typeof t=="number"&&i.val(t),i.trigger("mask")})},unmasked:function(){return this.map(function(){var t=n(this).val()||"0",r=t.indexOf("-")!==-1,i;return n(t.split(/\D/).reverse()).each(function(n,t){if(t)return i=t,!1}),t=t.replace(/\D/g,""),t=t.replace(new RegExp(i+"$"),"."+i),r&&(t="-"+t),parseFloat(t)})},init:function(t){return t=n.extend({prefix:"",suffix:"",affixesStay:!0,thousands:",",decimal:".",precision:2,allowZero:!1,allowNegative:!1},t),this.each(function(){function u(){var n=i.get(0),r=0,t=0,s,e,u,f,o;return typeof n.selectionStart=="number"&&typeof n.selectionEnd=="number"?(r=n.selectionStart,t=n.selectionEnd):(e=document.selection.createRange(),e&&e.parentElement()===n&&(f=n.value.length,s=n.value.replace(/\r\n/g,"\n"),u=n.createTextRange(),u.moveToBookmark(e.getBookmark()),o=n.createTextRange(),o.collapse(!1),u.compareEndPoints("StartToEnd",o)>-1?r=t=f:(r=-u.moveStart("character",-f),r+=s.slice(0,r).split("\n").length-1,u.compareEndPoints("EndToEnd",o)>-1?t=f:(t=-u.moveEnd("character",-f),t+=s.slice(0,t).split("\n").length-1)))),{start:r,end:t}}function y(){var t=!(i.val().length>=i.attr("maxlength")&&i.attr("maxlength")>=0),n=u(),r=n.start,f=n.end,e=n.start!==n.end&&i.val().substring(r,f).match(/\d/)?!0:!1,o=i.val().substring(0,1)==="0";return t||e||o}function p(n){i.each(function(t,i){if(i.setSelectionRange)i.focus(),i.setSelectionRange(n,n);else if(i.createTextRange){var r=i.createTextRange();r.collapse(!0);r.moveEnd("character",n);r.moveStart("character",n);r.select()}})}function f(n){var t="";return n.indexOf("-")>-1&&(n=n.replace("-",""),t="-"),t+r.prefix+n+r.suffix}function c(n){var s=n.indexOf("-")>-1&&r.allowNegative?"-":"",i=n.replace(/[^0-9]/g,""),t=i.slice(0,i.length-r.precision),u,e,o;return t=t.replace(/^0*/g,""),t=t.replace(/\B(?=(\d{3})+(?!\d))/g,r.thousands),t===""&&(t="0"),u=s+t,r.precision>0&&(e=i.slice(i.length-r.precision),o=new Array(r.precision+1-e.length).join(0),u+=r.decimal+o+e),f(u)}function l(n){var r=i.val().length,t;i.val(c(i.val()));t=i.val().length;n=n-(r-t);p(n)}function e(){var n=i.val();r.precision>0&&n.indexOf(r.decimal)<0&&(n+=r.decimal+new Array(r.precision+1).join(0));i.val(c(n))}function w(){var n=i.val();return r.allowNegative?n!==""&&n.charAt(0)==="-"?n.replace("-",""):"-"+n:n}function o(n){n.preventDefault?n.preventDefault():n.returnValue=!1}function a(t){t=t||window.event;var r=t.which||t.charCode||t.keyCode,h,e,s,c,f;return r===undefined?!1:r<48||r>57?r===45?(i.val(w()),!1):r===43?(i.val(i.val().replace("-","")),!1):r===13||r===9?!0:n.browser.mozilla&&(r===37||r===39)&&t.charCode===0?!0:(o(t),!0):y()?(o(t),h=String.fromCharCode(r),e=u(),s=e.start,c=e.end,f=i.val(),i.val(f.substring(0,s)+h+f.substring(c,f.length)),l(s+1),!1):!1}function b(n){n=n||window.event;var f=n.which||n.charCode||n.keyCode,h,t,s,e,c;return f===undefined?!1:(h=u(),t=h.start,s=h.end,f===8||f===46||f===63272?(o(n),e=i.val(),t===s&&(f===8?r.suffix===""?t-=1:(c=e.split("").reverse().join("").search(/\d/),t=e.length-c-1,s=t+1):s+=1),i.val(e.substring(0,t)+e.substring(s,e.length)),l(t),!1):f===9?!0:!0)}function k(){h=i.val();e();var t=i.get(0),n;t.createTextRange&&(n=t.createTextRange(),n.collapse(!1),n.select())}function v(){setTimeout(function(){e()},0)}function s(){var n=parseFloat("0")/Math.pow(10,r.precision);return n.toFixed(r.precision).replace(new RegExp("\\.","g"),r.decimal)}function d(t){if(n.browser.msie&&a(t),i.val()===""||i.val()===f(s()))r.allowZero?r.affixesStay?i.val(f(s())):i.val(s()):i.val("");else if(!r.affixesStay){var u=i.val().replace(r.prefix,"").replace(r.suffix,"");i.val(u)}i.val()!==h&&i.change()}function g(){var t=i.get(0),n;t.setSelectionRange?(n=i.val().length,t.setSelectionRange(n,n)):i.val(i.val())}var i=n(this),r,h;r=n.extend({},t);r=n.extend(r,i.data());i.unbind(".maskMoney");i.bind("keypress.maskMoney",a);i.bind("keydown.maskMoney",b);i.bind("blur.maskMoney",d);i.bind("focus.maskMoney",k);i.bind("click.maskMoney",g);i.bind("cut.maskMoney",v);i.bind("paste.maskMoney",v);i.bind("mask.maskMoney",e)})}};n.fn.maskMoney=function(i){if(t[i])return t[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)n.error("Method "+i+" does not exist on jQuery.maskMoney");else return t.init.apply(this,arguments)}})(window.jQuery||window.Zepto);
//# sourceMappingURL=jquery.maskMoney.min.js.map
